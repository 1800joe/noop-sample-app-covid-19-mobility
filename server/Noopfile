COMPONENT server service
ROUTE -m GET /api/*

RESOURCE mobilityDB dynamodb

FROM node:12-alpine AS build
ENV NODE_ENV production
COPY package*.json ./
RUN npm install

FROM node:12-alpine
ENV NODE_ENV production
ENV DB_ENDPOINT $.resources.mobilityDB.endpoint
ENV DB_TABLENAME $.resources.mobilityDB.tableName
COPY --from=build .  .
COPY server.js .

ENTRYPOINT npm start
