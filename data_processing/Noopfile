COMPONENT data service
ROUTE -m GET /data -p

FROM python:alpine as build
COPY source_data.py ./
COPY datasets/*.csv ./
RUN python source_data.py

FROM nginx:alpine
COPY --from=build data.json /usr/share/nginx/json/data
RUN rm /etc/nginx/conf.d/default.conf
COPY nginx.conf /etc/nginx
ENTRYPOINT ["nginx", "-g", "daemon off;"]
